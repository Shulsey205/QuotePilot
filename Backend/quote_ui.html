<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>QuotePilot DP Transmitter Quote</title>
</head>
<body>
    <h1>QuotePilot DP Transmitter Quote</h1>

  <label for="model">Model:</label>
<select id="model">
    <option value="QPSAH200S">QPSAH200S differential pressure transmitter</option>
    <option value="QPMAG">QPMAG mag meter</option>
</select>




    <br /><br />

    <!-- Part number input -->
    <label for="partNumber">Part number:</label>
    <input
        type="text"
        id="partNumber"
        size="60"
        value="QPSAH200S-A-M-G-3-C-3-1-1-C-1-02"
    />

    <button onclick="submitQuote()">Get quote</button>

    <h2>Result</h2>
    <pre id="result">No request sent yet.</pre>

    <script>
        async function submitQuote() {
            const modelSelect = document.getElementById("model");
            const partNumberInput = document.getElementById("partNumber");
            const resultElement = document.getElementById("result");

            const model = modelSelect.value;
            const partNumber = partNumberInput.value.trim();

            if (!partNumber) {
                resultElement.textContent = "Please enter a part number.";
                return;
            }

            try {
                resultElement.textContent = "Sending request...";

                const response = await fetch("http://127.0.0.1:8000/quote", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        model: model,
                        part_number: partNumber
                    })
                });

                const data = await response.json();

                resultElement.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                resultElement.textContent =
                    "Error calling API: " + String(error);
            }
        }
    </script>
</body>
</html>
